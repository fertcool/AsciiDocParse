= Quick Start: Parsing AsciiDoc with Python

The adparser library for Python provides powerful capabilities for working with AsciiDoc documents. In this Quick Start, you'll learn how to use the library's main functions to extract various elements from an AsciiDoc document.

== Installation
Install the asciidoc library using pip:
[source,bash]
pip install adparser

== Extracting Document Elements
The asciidoc library can extract the following elements from an AsciiDoc document:

* text lines (text_line) - the basic element, all the others are made up of it
* link (links)
* paragraphs (paragraph)
* headings (heading)
* lists (list)
* source blocks (source)
* tables (table)
* audio, video, and images. (audio, video, image)

To access these elements, you can use the Parser object.

== Parser object

To start parsing, we need to create Parser object:

[source, python]
----
from adparser import Parser
my_file = open(test.adoc)
parser = Parser(my_file)
----

The first parameter can be either the file descriptor or the source text of the asciidoc document. This constructor also has named parameter *link_opt*.

link_opt can be:

* 'show_links'
* 'hide_links'

This option can hide the url of a link or hyperlink or show it. The default is 'hide_link'


[source, python]
----
from adparser import Parser
my_file = open(test.adoc)
parser = Parser(my_file, link_opt='show_links')
----

== Parser methods

To work with each of the document elements described above, the Parser object has its own methods.

=== Example

[source,asciidoc]
.test.adoc
----

= Document Title

This is a paragraph.

== Section 1

This is another paragraph.

[source,python]
print("Hello, World!")

[NOTE]
This is a note.

image::image.png[]

----

[source, python]
----
>>> from adparser import Parser
... my_file = open(test.adoc)
... parser = Parser(my_file)

>>> for docelem in parser.headings():
...     print(docelem.data)
'Document Title'
'Document Title -> Section 1'
>>> for docelem in parser.sources():
...     print(docelem.data)
...     print(docelem.style)
'print("Hello, World!")'
'python'

----


The functions return an iterators for the objects-elements of the document.  They store the following attributes:

* data: The data associated with the element. Usually text, but in the case of tables, you can get either a matrix or a dictionary (see the example at the end of the readme) and in the case of lists, you can get only dictionary.
* section: The section of the document the element belongs to
* style: The style of the object (if element is source, paragraph, admonition block or text_line)

List of styles:

* text_line
** italic
** bold
** monospace

* source
** source languages
* for all elements admonition styles
** note
** tip
** caution
** warning
* for all elements area style
** sidebar
** example
** quote
** listning
** literal

You can set a named *style* and *section* parameters for these methods for a more accurate selection.

[source,asciidoc]
.test.adoc
----

= Document Title

== Python

[source,python]
print("Hello, World!")

== C++

[source,cpp]
std::cout << "Hello, World!";

----
[source, python]
----
>>> from adparser import Parser
... my_file = open(test.adoc)
... parser = Parser(my_file)

>>> for docelem in parser.sources(style='cpp'):
...     print(docelem.data)
...     print(docelem.style)
'std::cout << "Hello, World!";'
'cpp'
>>> for docelem in parser.sources(section='Document Title->Python'):
...     print(docelem.data)

'print("Hello, World!")'
----

=== How get tables:

[source,asciidoc]
.test.adoc
----

= Document Title

[cols="1,1"]
|===
|Cell in column 1, row 1
|Cell in column 2, row 1

|Cell in column 1, row 2
|Cell in column 2, row 2

|Cell in column 1, row 3
|Cell in column 2, row 3
|===

----


The table objects also have the *data.marix* and *data.dict* attributes.

[source, python]
----
>>> from adparser import Parser
... my_file = open(test.adoc)
... parser = Parser(my_file)
>>> elemiter = parser.table()
>>> elemiter = next(elemiter)

>>>  print(elemiter.data.matrix[0][0])
'Cell in column 1, row 1'
>>> print(elemiter.data.matrix[1][0])
'Cell in column 2, row 1'

----


[source, python]
----

>>> print(elemiter.data.dict["col1"])
['Cell in column 1, row 1', 'Cell in column 1, row 2', 'Cell in column 1, row 3']

----
Keys with the names "col1" and "col2" were automatically created
[source,asciidoc]
.test1.adoc
----

= Document Title

[cols="1,1"]
[cols="3,3,3,3"]
|===
|Column 1 |Column 2 |Column 3 |Column 4

|Cell in column 1
|Cell in column 2
|Cell in column 3
|Cell in column 4
|===

----
[source, python]
----
>>> from adparser import Parser
... my_file = open(test1.adoc)
... parser = Parser(my_file)
>>> elemiter = parser.tables()
>>> elemiter = next(elemiter)

>>>  print(elemiter.data.dict["Column 1"])
["Cell in column 1"]
>>> print(elemiter.data.matrix[0][0])
'Column 1'
>>> print(elemiter.data.matrix[0][1])
'Cell in column 1'
----
The first element in the column becomes the column name

=== get_near_up() and get_near_down() methods

To access the closest element to the current one, there are methods get_near_up() and get_near_down(). The accepted parameter is a string with the name of the required element.

[source,asciidoc]
.test.adoc
----

= Document Title

This is a paragraph.

== Section 1

This is another paragraph.

[source,python]
print("Hello, World!")

[NOTE]
This is a note.

image::image.png[]

----
[source, python]
----
>>> from adparser import Parser
... my_file = open(test.adoc)
... parser = Parser(my_file)
>>> for docelem in parser.source():
...     up_heading = docelem.get_near_up("heading")
...     print(up_heading.data)
...     down_image = docelem.get_near_down("image")
...     print(down_image.data)
'Document Title -> Section 1'
'image.png'
----
In the case of directly nested elements, get_near_up() will output the lowest element from the upper level, and get_near_down() will output the farthest from the inner one.

[source,asciidoc]
.test2.adoc
----

=====
Here's a sample AsciiDoc document:

-----
= Document Title

Content goes here.
-----

The document header is useful, but not required.
=====

----
[source, python]
----
>>> from adparser import Parser
... my_file = open(test.adoc)
... parser = Parser(my_file)
>>> for docelem in parser.paragraphs(style='listing'):
...     up_heading = docelem.get_near_up("paragraph")
...     print(up_heading.data)

'The document header is useful, but not required.'
'= Document Title'
----
You can also set a named style parameter for these methods.